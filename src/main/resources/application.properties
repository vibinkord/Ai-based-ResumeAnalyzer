################################################################################
# AI Resume Analyzer - Application Configuration
# 
# This file contains all configurable properties for the application.
# Different profiles (dev, test, prod) can override these defaults.
# 
# Environment Variables:
#   - GEMINI_API_KEY: Google Gemini API key (required)
#   - SERVER_PORT: HTTP server port (optional, default: 8084)
#   - LOG_LEVEL: Logging level (optional, default: INFO)
#
################################################################################

# ============================================================================
# Application Configuration
# ============================================================================
spring.application.name=AI Resume Analyzer
application.version=1.0.0
application.description=AI-powered resume analyzer with skill matching and suggestions

# ============================================================================
# Server Configuration
# ============================================================================
# Server port - change if 8084 is already in use
server.port=8084

# Server servlet path - base path for all endpoints
server.servlet.context-path=/

# Server shutdown - graceful shutdown for proper cleanup
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

# ============================================================================
# Spring MVC Configuration
# ============================================================================
# Enable multipart file uploads
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# Content type
spring.mvc.charset.encoding=UTF-8
server.compression.enabled=true
server.compression.min-response-size=1024

# ============================================================================
# Logging Configuration
# ============================================================================
# Root logger level
logging.level.root=INFO

# Application-specific logging
logging.level.com.resumeanalyzer=DEBUG
logging.level.com.resumeanalyzer.web.controller=DEBUG
logging.level.com.resumeanalyzer.analysis=DEBUG
logging.level.com.resumeanalyzer.validation=DEBUG

# Spring framework logging
logging.level.org.springframework=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.boot=INFO

# Third-party logging
logging.level.org.apache.pdfbox=WARN
logging.level.org.jsoup=WARN
logging.level.org.apache.http=WARN

# Log file configuration
logging.file.name=logs/resume-analyzer.log
logging.file.max-size=10MB
logging.file.max-history=30
logging.file.total-size-cap=500MB
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# ============================================================================
# Resume Analysis Configuration
# ============================================================================
# Maximum file upload sizes (in bytes)
resume.analyzer.max-resume-size=51200
resume.analyzer.max-job-description-size=51200
resume.analyzer.min-text-length=1

# Skill extraction configuration
resume.analyzer.skills.enabled=true
resume.analyzer.skills.config-file=classpath:skills.json
resume.analyzer.skills.use-fallback=true
resume.analyzer.skills.cache-enabled=true

# Match percentage thresholds
resume.analyzer.match.good-match-threshold=70
resume.analyzer.match.acceptable-match-threshold=50
resume.analyzer.match.poor-match-threshold=30

# ============================================================================
# Gemini LLM API Configuration
# ============================================================================
# API Credentials
# Get your free API key from: https://ai.google.dev/
# IMPORTANT: Set via environment variable GEMINI_API_KEY in production
gemini.api.key=${GEMINI_API_KEY:AIzaSyDA7hatckb-J_ZV-hvqyeXlT97B8pRCdDU}
gemini.api.url=https://generativelanguage.googleapis.com/v1beta/models/gemini-flash-latest:generateContent

# AI Suggestions Configuration
resume.analyzer.ai-suggestions.enabled=true
resume.analyzer.ai-suggestions.fallback-to-rules=true
resume.analyzer.ai-suggestions.timeout-seconds=30
resume.analyzer.ai-suggestions.max-retries=2

# Gemini model configuration
gemini.model.name=gemini-flash-latest
gemini.model.temperature=0.7
gemini.model.max-output-tokens=500
gemini.model.top-p=0.9
gemini.model.top-k=40

# ============================================================================
# File Processing Configuration
# ============================================================================
# Supported file types
file.upload.allowed-types=.pdf,.txt,.docx
file.upload.check-mime-type=true
file.upload.scan-for-viruses=false

# PDF processing
file.pdf.enabled=true
file.pdf.extract-text=true
file.pdf.extract-images=false

# Text file processing
file.text.enabled=true
file.text.charset=UTF-8

# Word document processing
file.docx.enabled=false

# ============================================================================
# Batch Processing Configuration
# ============================================================================
batch.processing.enabled=true
batch.processing.max-items=100
batch.processing.timeout-seconds=300
batch.processing.thread-pool-size=5

# ============================================================================
# Feature Flags
# ============================================================================
features.health-check.enabled=true
features.skills-list.enabled=true
features.batch-analysis.enabled=true
features.resume-comparison.enabled=true
features.file-upload.enabled=true
features.ai-suggestions.enabled=true

# ============================================================================
# Security Configuration
# ============================================================================
security.input-validation.enabled=true
security.sanitize-input=true
security.block-sql-injection=true
security.block-script-injection=true
security.block-null-bytes=true
security.max-request-size-bytes=52428800

# CORS Configuration (if needed)
spring.web.cors.allowed-origins=http://localhost:3000,http://localhost:8080
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.web.cors.allowed-headers=*
spring.web.cors.max-age=3600

# ============================================================================
# API Documentation (Swagger/OpenAPI)
# ============================================================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha

# ============================================================================
# Performance & Caching
# ============================================================================
# Spring cache configuration
spring.cache.type=simple
spring.cache.cache-names=skills,resume-cache

# Disable Redis auto-configuration for development
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration

# Connection pool configuration
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000

# ============================================================================
# Application Monitoring & Actuator
# ============================================================================
# Actuator endpoints - for health checks and metrics
management.endpoints.web.exposure.include=health,metrics,info
management.endpoint.health.show-details=when-authorized
management.metrics.enable.jvm=true
management.metrics.enable.process=true

# ============================================================================
# Jackson (JSON) Configuration
# ============================================================================
spring.jackson.serialization.indent-output=true
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.write-null-map-values=true
spring.jackson.default-property-inclusion=non_null

# ============================================================================
# Timezone & Locale Configuration
# ============================================================================
spring.jackson.time-zone=UTC
spring.jackson.locale=en_US

# ============================================================================
# Error Handling
# ============================================================================
# Include error details in responses
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=false

# ============================================================================
# Email Configuration
# ============================================================================
# SMTP Configuration
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Email Application Properties
app.email.from=noreply@resumeanalyzer.com
app.email.admin-email=admin@resumeanalyzer.com
app.email.enabled=true

# ============================================================================
# Database Configuration (H2 In-Memory for Development)
# ============================================================================
# Database connection - H2 in-memory for development
spring.datasource.url=jdbc:h2:mem:resume_analyzer;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver
# H2 Console (useful for debugging)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# ============================================================================
# JPA/Hibernate Configuration
# ============================================================================
# Use 'create-drop' for development to auto-create schema
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.use_sql_comments=true

# ============================================================================
# Flyway Configuration (Database Migrations)
# ============================================================================
# Disable Flyway for H2 in-memory database (using Hibernate auto-schema)
spring.flyway.enabled=false

# ============================================================================
# JWT (JSON Web Token) Configuration
# ============================================================================
# JWT Secret key for signing tokens (use environment variable in production)
# IMPORTANT: Change this to a strong, random secret in production
# Minimum recommended length: 64 characters for HS512
jwt.secret=${JWT_SECRET:your-super-secret-key-change-this-in-production-minimum-64-characters-long}

# JWT Token Expiration time in milliseconds (default: 1 hour = 3600000ms)
jwt.expiration=${JWT_EXPIRATION:3600000}

# JWT Refresh Token Expiration time in milliseconds (default: 7 days = 604800000ms)
jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION:604800000}

# JWT Token type
jwt.token-type=Bearer

# ============================================================================
# Authentication Configuration
# ============================================================================
# Session management strategy
spring.security.session-fixation-strategy=migrateSession

# Password encoder configuration
security.password-encoder=bcrypt
security.password-min-length=6
